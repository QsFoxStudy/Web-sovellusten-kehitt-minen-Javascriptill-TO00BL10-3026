<!DOCTYPE html>
<html lang="fi">
  <head>
    <meta charset="utf-8" />
    <title>Työpaja 3</title>
    <link rel="stylesheet" href="css/styles.css" />
  </head>

  <body class="ws3">
    <h1>Työpaja 3: JavaScript-tapahtumat</h1>
    <hr />
    <p>
      Tässä harjoituksessa harjoittelemme JavaScript-tapahtumien käyttöä. Käytä
      luentomateriaalia rinnakkain näiden harjoitusten kanssa. On myös hyvä idea
      tallentaa kirjoittamasi koodirivit myöhempää käyttöä varten.
    </p>
    <hr />
    <h2 id="Otsikkoyksi">Harjoitus 1</h2>
    <p>
      Alla näet kolme painiketta. Muokkaa lähdekoodia ja lisää näihin
      painikkeisiin onClick-tapahtumat.
    </p>
    <p>
      <button id="Nappi">Napsauta minua</button>
      <button id="Nappikaksi">Näytä taulukko</button>
    </p>
    <div id="taulukonPaikka"></div>
    <div class="clear"></div>
    <ol>
      <li>
        Ensimmäisen painikkeen pitäisi avata alert-ikkuna, joka sanoo "Klikkasit
        minua!"
      </li>
      <li>
        Toinen painike kutsuu kirjoittamaasi funktiota nimeltä showTable().
        `showTable`-funktio tulostaa sivulle itse määrittelemäsi HTML-taulukon
        (alla) sivulle.
      </li>
      <li>
        Vinkki: Määrittele taulukko käyttäen backtick merkkejä eli ` -merkkejä.
      </li>
      <li>
        Vinkki:Etsi taulukolle sopiva paikka käyttäen `document.querySelector()
        -funktiota`. Käytä innerHTML-kenttää sisällön asettamiseen. Sijoita
        taulukko elementtiin, jonka id on 'taulukonPaikka'
      </li>
    </ol>
    <table id="example" class="display" style="border: 1px">
      <thead>
        <tr>
          <th>Nimi</th>
          <th>Tehtävä</th>
          <th>Palkka</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Tiger Nixon</td>
          <td>System Architect</td>
          <td>$320,800</td>
        </tr>
        <tr>
          <td>Garrett Winters</td>
          <td>Accountant</td>
          <td>$170,750</td>
        </tr>
        <tr>
          <td>Ashton Cox</td>
          <td>Junior Technical Author</td>
          <td>$86,000</td>
        </tr>
        <tr>
          <td>Cedric Kelly</td>
          <td>Senior Javascript Developer</td>
          <td>$433,060</td>
        </tr>
        <tr>
          <td>Airi Satou</td>
          <td>Accountant</td>
          <td>$162,700</td>
        </tr>
      </tbody>
    </table>

    <hr />
    <h2 id="Otsikkokaksi">Harjoitus 2</h2>
    <ul>
      <li>
        Lisää onMouseOver-tapahtuma otsikkoon "Harjoitus 2". Tapahtuman pitäisi
        aktivoitua, kun hiiri siirtyy otsikon päälle. Tulosta konsoliin:
        "Stepped over my a mouse!"
      </li>
      <li>
        Lisää toinen tapahtuma, joka aktivoituu, kun hiirellä klikataa Exercise
        1 -otsikon päältä. Vaihda tällä kertaa otsikon väri punaiseksi ja
        sisällöksi teksti: "Bye bye mouse!". Lisää kuuntelija dynaamisesti
        addEventListener()-funktiolla
      </li>
    </ul>
    ``Vinkki: etsi elementti käyttäen document.querySelector() -funktiota.
    Sisältöön pääset käsiksi innerHTML-kentän avulla.``
    <hr />
    <h2>Harjoitus 3</h2>
    <p>Alla näet yksinkertaisen lomakkeen.</p>
    <ul>
      <li>
        Lisää onfocus-tapahtuma textarea-alueeseen. Kun käyttäjä siirtyy
        kenttään, näytetään teksti: "Please fill in the form with proper data."
        Voit myös kokeilla taustavärin muuttamista.
      </li>
      <li>
        Lisää onkeydown-tapahtuma `textarea`-elementtiin. Lisää sitten koodi
        joka laskee näppäinpainallukset ja tulostaa ne tekstikenttään jonka id
        on "charcount". Voisitko keksiä muita fiksuja käyttötapoja
        tämänkaltaiselle kuuntelijalle?
      </li>
      <li>
        Kun lomakkeen painiketta klikataan, tarkista onko `textarea`-kenttä
        tyhjä. Ilmoita käyttäjälle tyhjästä kentästä asianmukaisella viestillä
        haluamallasi tavalla.
      </li>
      <li>
        VINKKI: Voit käyttää seuraavaa komentoa tekstialueen arvon lukemiseen:
        <i>document.getElementById("textdata").value</i>. Lomakkeita käsitellään
        tarkemmin työpajoissa 4 ja 5.
      </li>

      <li>
        Bonus: Näytä käyttäjälle reaaliaikainen merkkimäärä textarea-kentässä
        (esim. 0/200). Jos käyttäjä ylittää merkkirajan, muuta tekstin väri
        punaiseksi.
      </li>

      <li>
        >Haaste: Lisää "lähetä"-painikkeeseen deaktivointi, kun kenttä on tyhjä
        tai liian pitkä. Tämä onnistuu muuttamalla napin disabled-kenttää
        JavaScriptin avulla.
      </li>
    </ul>
    <form>
      <textarea id="textdata"></textarea><br />
      <span id="charcount"></span>
      <button id="Nappikolme">Lähetä</button>
    </form>
    <hr />
    <h2>Harjoitus 4</h2>
    <div id="coordinates"></div>
    <p>
      Lisää onMouseMove-tapahtuma yllä olevaan DIV-elementtiin. Kun liikutat
      hiirtä DIVin (suorakulmion) päällä, ohjelman pitäisi tulostaa kohdistimen
      koordinaatit. Kokeile ensin tulostamista konsoliin
      `console.log`-komennolla.
    </p>

    <p>
      Kun ohjelma toimii, voit kokeilla tulostaa tekstin elementtiin, jolla on
      id "coords".
    </p>
    <p>
      VINKKI: Käytä
      <code>document.getElementById("coordinates").innerHTML</code> tulostuksen
      toteuttamiseen.
    </p>

    <h2>Bonus-tehtävä</h2>

    <p>
      Tee nappi joka tarkistaa käyttäjän sijainnin käyttäen
      <a
        href="https://developer.mozilla.org/en-US/docs/Web/API/Geolocation_API/Using_the_Geolocation_API"
        >Geolocation API:a</a
      >
      ja tulostaa sijainnin koordinaatit konsoliin
    </p>

    <p>
      . Huom: Jotkin selaimet eivät salli tätä vaihtamatta turva-asetuksia.
      Kokeile eri selaimia, jos saat virheitä.
    </p>

    <p>
      Ohjaa lopuksi selain Google Maps -sivulle. Rakenna osoite käyttäen
      lukemiasi koordinaatteja.
    </p>

    <p>
      VINKKI: Voit avata Google Mapsin tietyillä koordinaateilla linkillä:
      `https://www.google.com/maps?q=LATITUDE,LONGITUDE`
    </p>

    <p>
      Bonus: Miten voisi käsitellä tilanteen, jossa sijainti ei ole saatavilla?
      <script>
        const btnYksi = document.getElementById("Nappi");
        btnYksi.onclick = function () {
          alert("Klikkasit minua!");
        };

        const taulukonPaikka = document.querySelector("#taulukonPaikka");

        function showTable() {
          const htmlTaulukko = `
                    <table>
                        <thead>
                            <tr>
                                <th>Nimi</th>
                                <th>Tehtävä</th>
                                <th>Palkka</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Maija</td>
                                <td>Raketti-insinööri</td>
                                <td>100€</td>
                            </tr>
                            <tr>
                                <td>Antti</td>
                                <td>Markkinointi harjoittelija</td>
                                <td>5000€</td>
                            </tr>
                            <tr>
                                <td>Pekka</td>
                                <td>Astronautti</td>
                                <td>300€</td>
                            </tr>
                            <tr>
                                <td>Maija</td>
                                <td>Siivooja</td>
                                <td>3000€</td>
                            </tr>
                        </tbody>
                    </table>
                `;

          taulukonPaikka.innerHTML = htmlTaulukko;
        }

        const btnKaksi = document.getElementById("Nappikaksi");

        btnKaksi.onclick = function () {
          showTable();
        };

        const Otsikkokaksi = document.getElementById("Otsikkokaksi");
        Otsikkokaksi.onmouseover = function () {
          console.log("Stepped over my a mouse!");
        };

        const Otsikkoyksi = document.querySelector("#Otsikkoyksi");

        function aktivoitua() {
          Otsikkoyksi.style.color = "red";
          Otsikkoyksi.innerHTML = "Bye bye mouse!";
        }
        {
          Otsikkoyksi.addEventListener("click", aktivoitua);
        }

        const tkentta = document.getElementById("textdata");
        const viesti = document.getElementById("charcount");
        const btnKolme = document.getElementById("Nappikolme");

        function fokushiiri() {
          viesti.innerHTML = "Please fill in the form with proper data.";

          tkentta.style.backgroundColor = "#ffc";
        }

        {
          tkentta.onfocus = fokushiiri;
        }
        function pohjassa() {
          const pituus = tkentta.value.length;

          viesti.innerHTML = `Merkkejä: ${pituus}`;
        }
        tkentta.addEventListener("keydown", pohjassa);
        btnKolme.onclick = function (event) {
          event.preventDefault();

          const arvo = tkentta.value.trim();

          if (arvo === "") {
            viesti.innerHTML = "The field is empty, pls write!";
          }
        };
        const koordinaatti = document.getElementById("coordinates");

        function naytakoordinaatti(event) {
          const x = event.offsetX;
          const y = event.offsetY;
          
          console.log(`Hiiren koordinaatit: X=${x}, Y=${y}`);

          koordinaatti.innerHTML = `X: ${x}, Y: ${y}`;
        }

        if (koordinaatti) {
          koordinaatti.onmousemove = naytakoordinaatti;
        }
      </script>
    </p>
  </body>
</html>
